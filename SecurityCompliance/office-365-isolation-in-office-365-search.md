---
title: Aislamiento de inquilino de Office 365 en la búsqueda de Office 365
ms.author: robmazz
author: robmazz
manager: laurawi
audience: ITPro
ms.topic: article
ms.service: O365-seccomp
localization_priority: Normal
search.appverid:
- MET150
ms.collection:
- Strat_O365_IP
- M365-security-compliance
description: 'Resumen: una explicación del aislamiento de inquilinos en Office 365 Search.'
ms.openlocfilehash: 5254ffe2e6b92c6ba100a9e45b35b456ead1b000
ms.sourcegitcommit: 0017dc6a5f81c165d9dfd88be39a6bb17856582e
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 04/23/2019
ms.locfileid: "32262602"
---
# <a name="tenant-isolation-in-office-365-search"></a><span data-ttu-id="d5ca9-103">Aislamiento de inquilino en búsqueda de Office 365</span><span class="sxs-lookup"><span data-stu-id="d5ca9-103">Tenant Isolation in Office 365 Search</span></span>
<span data-ttu-id="d5ca9-104">La búsqueda de SharePoint Online usa un modelo de separación de inquilinos que equilibra la eficiencia de las estructuras de datos compartidos con protección frente a la pérdida de información entre los inquilinos.</span><span class="sxs-lookup"><span data-stu-id="d5ca9-104">SharePoint Online search uses a tenant separation model that balances the efficiency of shared data structures with protection against information leaking between tenants.</span></span> <span data-ttu-id="d5ca9-105">Con este modelo, se evita que las características de búsqueda de:</span><span class="sxs-lookup"><span data-stu-id="d5ca9-105">With this model, we prevent the Search features from:</span></span>
- <span data-ttu-id="d5ca9-106">Devolver resultados de consulta que contienen documentos de otros inquilinos</span><span class="sxs-lookup"><span data-stu-id="d5ca9-106">Returning query results that contain documents from other tenants</span></span>
- <span data-ttu-id="d5ca9-107">Exponer la información suficiente en los resultados de la consulta que un usuario cualificado puede deducir información sobre otros inquilinos</span><span class="sxs-lookup"><span data-stu-id="d5ca9-107">Exposing sufficient information in query results that a skilled user could infer information about other tenants</span></span>
- <span data-ttu-id="d5ca9-108">Mostrar esquema o configuración de otro espacio empresarial</span><span class="sxs-lookup"><span data-stu-id="d5ca9-108">Showing schema or settings from another tenant</span></span>
- <span data-ttu-id="d5ca9-109">Mezclar información de procesamiento de análisis entre espacios empresariales o los resultados de almacén en el inquilino incorrecto</span><span class="sxs-lookup"><span data-stu-id="d5ca9-109">Mixing analytics processing information between tenants or store results in the wrong tenant</span></span>
- <span data-ttu-id="d5ca9-110">Uso de entradas de Diccionario de otro espacio empresarial</span><span class="sxs-lookup"><span data-stu-id="d5ca9-110">Using dictionary entries from another tenant</span></span>

<span data-ttu-id="d5ca9-111">Para cada tipo de datos de espacio empresarial, usamos una o más capas de protección en el código para evitar pérdidas accidentales de información.</span><span class="sxs-lookup"><span data-stu-id="d5ca9-111">For each type of tenant data, we use one or more layers of protection in the code to prevent accidental leaking of information.</span></span> <span data-ttu-id="d5ca9-112">Los datos más críticos tienen la mayor parte de las capas de protección para asegurarse de que un solo defecto no produce fugas de información reales o percibidas.</span><span class="sxs-lookup"><span data-stu-id="d5ca9-112">The most critical data has the most layers of protection to make sure that a single defect doesn't result in actual or perceived information leakage.</span></span>

## <a name="tenant-separation-for-the-search-index"></a><span data-ttu-id="d5ca9-113">Separación de inquilinos para el índice de búsqueda</span><span class="sxs-lookup"><span data-stu-id="d5ca9-113">Tenant Separation for the Search Index</span></span>
<span data-ttu-id="d5ca9-114">El índice de búsqueda se almacena en el disco en los servidores que hospedan los componentes de índice y los inquilinos comparten los archivos de índice.</span><span class="sxs-lookup"><span data-stu-id="d5ca9-114">The search index is stored on disk in the servers hosting the index components and the tenants share the index files.</span></span> <span data-ttu-id="d5ca9-115">Los documentos indizados de un inquilino solo son visibles para las consultas de ese espacio empresarial.</span><span class="sxs-lookup"><span data-stu-id="d5ca9-115">A tenant's indexed documents are visible only for queries for that tenant.</span></span> <span data-ttu-id="d5ca9-116">Tres mecanismos independientes evitan la fuga de información:</span><span class="sxs-lookup"><span data-stu-id="d5ca9-116">Three independent mechanisms prevent information leakage:</span></span>
- <span data-ttu-id="d5ca9-117">Filtrado de ID de inquilino</span><span class="sxs-lookup"><span data-stu-id="d5ca9-117">Tenant ID filtering</span></span>
- <span data-ttu-id="d5ca9-118">Prefijo del período del identificador de espacio empresarial</span><span class="sxs-lookup"><span data-stu-id="d5ca9-118">Tenant ID term prefixing</span></span>
- <span data-ttu-id="d5ca9-119">Comprobaciones de LCA</span><span class="sxs-lookup"><span data-stu-id="d5ca9-119">ACL checks</span></span>

<span data-ttu-id="d5ca9-120">Los tres mecanismos tendrían que producir un error en la búsqueda para devolver documentos al inquilino incorrecto.</span><span class="sxs-lookup"><span data-stu-id="d5ca9-120">All three mechanisms would have to fail for Search to return documents to the wrong tenant.</span></span>

## <a name="tenant-id-filtering-and-tenant-id-term-prefixing"></a><span data-ttu-id="d5ca9-121">Filtrado de ID de inquilino e identificador de espacio empresarial con prefijo</span><span class="sxs-lookup"><span data-stu-id="d5ca9-121">Tenant ID Filtering and Tenant ID Term Prefixing</span></span>
<span data-ttu-id="d5ca9-122">Prefijos de búsqueda todos los términos que se indizan en el índice de texto completo con el identificador de inquilino.</span><span class="sxs-lookup"><span data-stu-id="d5ca9-122">Search prefixes every term that is indexed in the full-text index with the tenant ID.</span></span> <span data-ttu-id="d5ca9-123">Por ejemplo, cuando el término "*foo*" está indizado para un inquilino con el identificador "*123*", la entrada en el índice de texto completo es "*123foo".*</span><span class="sxs-lookup"><span data-stu-id="d5ca9-123">For example, when the term "*foo*" is indexed for a tenant with an ID of "*123*", the entry in the full-text index is "*123foo.*"</span></span>

<span data-ttu-id="d5ca9-124">Todas las consultas se convierten para incluir el identificador de inquilino mediante un proceso denominado filtrado de ID de inquilino.</span><span class="sxs-lookup"><span data-stu-id="d5ca9-124">Every query is converted to include the tenant ID using a process called tenant ID filtering.</span></span> <span data-ttu-id="d5ca9-125">Por ejemplo, la consulta "*foo*" se convierte en "<*GUID*>. *foo* Y *tenantID*: <*GUID*_GT_ ", donde <*GUID*> representa al inquilino que realiza la consulta.</span><span class="sxs-lookup"><span data-stu-id="d5ca9-125">For example, the query "*foo*" is converted to "<*guid*>.*foo* AND *tenantID*:<*guid*>", where <*guid*> represents the tenant performing the query.</span></span> <span data-ttu-id="d5ca9-126">Esta conversión de consulta se produce dentro de cada nodo de índice y ni la consulta ni el procesamiento de contenido pueden influir en él.</span><span class="sxs-lookup"><span data-stu-id="d5ca9-126">This query conversion occurs within each index node and neither query nor content processing can influence it.</span></span> <span data-ttu-id="d5ca9-127">Dado que el identificador de inquilino se agrega a cada consulta, no se puede inferir la frecuencia de un término en otros inquilinos mirando la clasificación de mejor coincidencia en un espacio empresarial.</span><span class="sxs-lookup"><span data-stu-id="d5ca9-127">Because the tenant ID is added to every query, the frequency of a term in other tenants can't be inferred by looking at best match ranking in one tenant.</span></span>

<span data-ttu-id="d5ca9-128">La prefijo del período del identificador de espacio empresarial solo se produce en el índice de texto completo.</span><span class="sxs-lookup"><span data-stu-id="d5ca9-128">Tenant ID term prefixing occurs only in the full-text index.</span></span> <span data-ttu-id="d5ca9-129">Las búsquedas con campo, como "*Título: foo*", van a un índice de búsqueda sintética donde los términos no tienen prefijo por identificador de inquilino.</span><span class="sxs-lookup"><span data-stu-id="d5ca9-129">Fielded searches, such as "*title:foo*", go to a synthetic search index where terms aren't prefixed by tenant ID.</span></span> <span data-ttu-id="d5ca9-130">En su lugar, las búsquedas con campos se anteponen al nombre del campo.</span><span class="sxs-lookup"><span data-stu-id="d5ca9-130">Instead, fielded searches are prefixed with the field name.</span></span> <span data-ttu-id="d5ca9-131">Por ejemplo, la consulta "*title: foo*" se convierte en "*Fields. title: foo y Fields. tenantID*: <*GUID*>".</span><span class="sxs-lookup"><span data-stu-id="d5ca9-131">For example, the query "*title:foo*" is converted to "*fields.title:foo AND fields.tenantID*:<*guid*>."</span></span> <span data-ttu-id="d5ca9-132">Debido a que la frecuencia de un término no influye en la clasificación de aciertos en el índice de búsqueda sintético, no es necesario que la separación de inquilinos por term prefijo.</span><span class="sxs-lookup"><span data-stu-id="d5ca9-132">Because the frequency of a term doesn't influence ranking of hits in the synthetic search index, there's no need for tenant separation by term prefixing.</span></span> <span data-ttu-id="d5ca9-133">Para una búsqueda con campo como "*title: foo*", la separación del contenido del espacio empresarial depende del filtrado de identificador de inquilino por conversión de consulta.</span><span class="sxs-lookup"><span data-stu-id="d5ca9-133">For a fielded search like "*title:foo*", tenant content separation depends on tenant ID filtering by query conversion.</span></span>

## <a name="document-access-control-list-checks"></a><span data-ttu-id="d5ca9-134">Documentar las comprobaciones de listas de control de acceso</span><span class="sxs-lookup"><span data-stu-id="d5ca9-134">Document Access Control List Checks</span></span>
<span data-ttu-id="d5ca9-135">La búsqueda controla el acceso a los documentos a través de las ACL que se guardan en el índice de búsqueda.</span><span class="sxs-lookup"><span data-stu-id="d5ca9-135">Search controls access to documents through ACLs that are saved in the search index.</span></span> <span data-ttu-id="d5ca9-136">Cada elemento se indiza con un conjunto de términos en un campo de ACL especial.</span><span class="sxs-lookup"><span data-stu-id="d5ca9-136">Every item is indexed with a set of terms in a special ACL field.</span></span> <span data-ttu-id="d5ca9-137">El campo ACL contiene un término por grupo o usuario que puede ver el documento.</span><span class="sxs-lookup"><span data-stu-id="d5ca9-137">The ACL field contains one term per group or user that can view the document.</span></span> <span data-ttu-id="d5ca9-138">Cada consulta se aumenta con una lista de términos de entrada de control de acceso (ACE), una para cada grupo al que pertenece el usuario autenticado.</span><span class="sxs-lookup"><span data-stu-id="d5ca9-138">Every query is augmented with a list of access control entry (ACE) terms, one for each group to which the authenticated user belongs.</span></span>

<span data-ttu-id="d5ca9-139">Por ejemplo, una consulta como "<*GUID*>. *foo y tenantID*: <*GUID*> "se convierte en:"*GUID*de < >. *foo and tenantID*: <*GUID*> *and* (*docACL:*<*ACE1*> *o docACL*: <*ace2*> *o docACL*: <*Ace3*> \*... \*)"</span><span class="sxs-lookup"><span data-stu-id="d5ca9-139">For example, a query like "<*guid*>.*foo AND tenantID*:<*guid*>" becomes: "<*guid*>.*foo AND tenantID*:<*guid*> *AND* (*docACL:*<*ace1*> *OR docACL*:<*ace2*> *OR docACL*:<*ace3*> *...*)"</span></span>

<span data-ttu-id="d5ca9-140">Como los identificadores de usuario y de grupo y por tanto las ACE son únicos, esto proporciona un nivel adicional de seguridad entre los inquilinos para los documentos que solo son visibles para algunos usuarios.</span><span class="sxs-lookup"><span data-stu-id="d5ca9-140">Because user and group identifiers and hence ACEs are unique, this provides an extra level of security between tenants for documents that are only visible to some users.</span></span> <span data-ttu-id="d5ca9-141">Lo mismo sucede con la ACE especial "todos excepto usuarios externos" que concede acceso a los usuarios habituales del espacio empresarial.</span><span class="sxs-lookup"><span data-stu-id="d5ca9-141">The same is the case for the special "Everyone except external users" ACE that grants access to regular users in the tenant.</span></span> <span data-ttu-id="d5ca9-142">Pero, puesto que las ACE para "everyone" son las mismas para todos los inquilinos, la separación de inquilinos para documentos públicos depende del filtrado de ID de inquilino.</span><span class="sxs-lookup"><span data-stu-id="d5ca9-142">But since ACEs for "Everyone" are the same for all tenants, tenant separation for public documents depends on tenant ID filtering.</span></span> <span data-ttu-id="d5ca9-143">También se admiten las ACE de denegación.</span><span class="sxs-lookup"><span data-stu-id="d5ca9-143">Deny ACEs are also supported.</span></span> <span data-ttu-id="d5ca9-144">El aumento de la consulta agrega una cláusula que quita un documento del resultado cuando hay una coincidencia con una ACE de denegación.</span><span class="sxs-lookup"><span data-stu-id="d5ca9-144">The query augmentation adds a clause that removes a document from the result when there is a match with a deny ACE.</span></span>

<span data-ttu-id="d5ca9-145">En la búsqueda de Exchange Online, el índice se particiona en el identificador de buzón para los buzones de correo del usuario individual en lugar de con el identificador de inquilino (identificador de suscripción) como en SharePoint Online.</span><span class="sxs-lookup"><span data-stu-id="d5ca9-145">In Exchange Online search, the index is partitioned on mailbox ID for individual user's mailboxes instead of tenant ID (subscription ID) as in SharePoint Online.</span></span> <span data-ttu-id="d5ca9-146">El mecanismo de partición es el mismo que el de SharePoint Online, pero no hay ningún filtrado de LCA.</span><span class="sxs-lookup"><span data-stu-id="d5ca9-146">The partitioning mechanism is the same as SharePoint Online, but there is no ACL filtering.</span></span>
