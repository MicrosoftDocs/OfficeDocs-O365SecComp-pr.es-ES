---
title: Aislamiento de inquilinos de Office 365 en la búsqueda de Office 365
ms.author: robmazz
author: robmazz
manager: laurawi
ms.date: 8/21/2018
audience: ITPro
ms.topic: article
ms.service: Office 365 Administration
localization_priority: None
search.appverid:
- MET150
ms.collection: Strat_O365_Enterprise
description: 'Resumen: Una explicación de aislamiento de inquilinos de la búsqueda de Office 365.'
ms.openlocfilehash: cc73f3c157ffd20b3891a6b7c58e7d0b2adf4e55
ms.sourcegitcommit: 36c5466056cdef6ad2a8d9372f2bc009a30892bb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/27/2018
ms.locfileid: "22535594"
---
# <a name="tenant-isolation-in-office-365-search"></a><span data-ttu-id="b5207-103">Aislamiento de inquilino en búsqueda de Office 365</span><span class="sxs-lookup"><span data-stu-id="b5207-103">Tenant Isolation in Office 365 Search</span></span>
<span data-ttu-id="b5207-p101">Búsqueda de SharePoint Online usa un modelo de separación de inquilinos que equilibra la eficacia de las estructuras de datos compartidos con protección contra la pérdida de entre los inquilinos de información. Con este modelo, se evitar que las características de búsqueda de:</span><span class="sxs-lookup"><span data-stu-id="b5207-p101">SharePoint Online search uses a tenant separation model that balances the efficiency of shared data structures with protection against information leaking between tenants. With this model, we prevent the Search features from:</span></span>
- <span data-ttu-id="b5207-106">Devolver resultados de consulta que contienen los documentos de otros inquilinos</span><span class="sxs-lookup"><span data-stu-id="b5207-106">Returning query results that contain documents from other tenants</span></span>
- <span data-ttu-id="b5207-107">Exponer información suficiente en los resultados de consulta que un usuario cualificado puede inferir información acerca de otros inquilinos</span><span class="sxs-lookup"><span data-stu-id="b5207-107">Exposing sufficient information in query results that a skilled user could infer information about other tenants</span></span>
- <span data-ttu-id="b5207-108">Esquema que muestra o la configuración desde otro inquilino</span><span class="sxs-lookup"><span data-stu-id="b5207-108">Showing schema or settings from another tenant</span></span>
- <span data-ttu-id="b5207-109">Mezcla de procesamiento de información entre los inquilinos o los resultados de almacenamiento en el inquilino incorrecto de análisis</span><span class="sxs-lookup"><span data-stu-id="b5207-109">Mixing analytics processing information between tenants or store results in the wrong tenant</span></span>
- <span data-ttu-id="b5207-110">Uso de entradas de diccionario desde otro inquilino</span><span class="sxs-lookup"><span data-stu-id="b5207-110">Using dictionary entries from another tenant</span></span>

<span data-ttu-id="b5207-p102">Para cada tipo de datos de inquilinos, usaremos una o más capas de protección en el código para evitar la pérdida accidental de la información. Los datos más críticos tienen la mayoría de las capas de protección para asegurarse de que no se produce un solo defecto fuga de información real o detectadas.</span><span class="sxs-lookup"><span data-stu-id="b5207-p102">For each type of tenant data, we use one or more layers of protection in the code to prevent accidental leaking of information. The most critical data has the most layers of protection to make sure that a single defect doesn't result in actual or perceived information leakage.</span></span>

## <a name="tenant-separation-for-the-search-index"></a><span data-ttu-id="b5207-113">Separación de inquilino para el índice de búsqueda</span><span class="sxs-lookup"><span data-stu-id="b5207-113">Tenant Separation for the Search Index</span></span>
<span data-ttu-id="b5207-p103">El índice de búsqueda se almacena en el disco en los servidores que hospedan los componentes de índice y los inquilinos compartan los archivos de índice. Documentos indizados de un inquilino son visibles sólo para las consultas para ese inquilino. Tres mecanismos independientes para evitar fugas de información:</span><span class="sxs-lookup"><span data-stu-id="b5207-p103">The search index is stored on disk in the servers hosting the index components and the tenants share the index files. A tenant's indexed documents are visible only for queries for that tenant. Three independent mechanisms prevent information leakage:</span></span>
- <span data-ttu-id="b5207-117">Filtrado de identificador de inquilino</span><span class="sxs-lookup"><span data-stu-id="b5207-117">Tenant ID filtering</span></span>
- <span data-ttu-id="b5207-118">Término prefijo de identificador de inquilino</span><span class="sxs-lookup"><span data-stu-id="b5207-118">Tenant ID term prefixing</span></span>
- <span data-ttu-id="b5207-119">Comprobaciones de ACL</span><span class="sxs-lookup"><span data-stu-id="b5207-119">ACL checks</span></span>

<span data-ttu-id="b5207-120">Los tres mecanismos tendría que producirá un error de búsqueda devolver los documentos para el inquilino incorrecto.</span><span class="sxs-lookup"><span data-stu-id="b5207-120">All three mechanisms would have to fail for Search to return documents to the wrong tenant.</span></span>

## <a name="tenant-id-filtering-and-tenant-id-term-prefixing"></a><span data-ttu-id="b5207-121">Filtrado de identificador de inquilino y el término de identificador de inquilino como prefijo</span><span class="sxs-lookup"><span data-stu-id="b5207-121">Tenant ID Filtering and Tenant ID Term Prefixing</span></span>
<span data-ttu-id="b5207-p104">Prefijos de búsqueda todos los términos que se indiza en el índice de texto completo con el identificador del inquilino. Por ejemplo, cuando no se indiza el término "*foo*" para un inquilino con el identificador "*123*", la entrada en el índice de texto completo es "*123foo.*"</span><span class="sxs-lookup"><span data-stu-id="b5207-p104">Search prefixes every term that is indexed in the full-text index with the tenant ID. For example, when the term "*foo*" is indexed for a tenant with an ID of "*123*", the entry in the full-text index is "*123foo.*"</span></span>

<span data-ttu-id="b5207-p105">Todas las consultas se convierten para incluir el identificador de inquilino mediante un proceso denominado filtrado de identificador del inquilino. Por ejemplo, se convierte la consulta "*foo*" a "<*guid*>. *foo* Y *tenantID*: <*guid*> ", donde <*guid*> representa el inquilino a realizar la consulta. Esta conversión de consulta se produce dentro de cada nodo de índice y procesamiento de consulta ni contenido puede influir en. Debido a que se agrega el identificador de inquilino para cada consulta, no se puede inferir la frecuencia de un término en otros inquilinos mirando en el mejor coincidencia de clasificación en un inquilino.</span><span class="sxs-lookup"><span data-stu-id="b5207-p105">Every query is converted to include the tenant ID using a process called tenant ID filtering. For example, the query "*foo*" is converted to "<*guid*>.*foo* AND *tenantID*:<*guid*>", where <*guid*> represents the tenant performing the query. This query conversion occurs within each index node and neither query nor content processing can influence it. Because the tenant ID is added to every query, the frequency of a term in other tenants can't be inferred by looking at best match ranking in one tenant.</span></span>

<span data-ttu-id="b5207-p106">Término prefijo de identificador de inquilino se produce sólo en el índice de texto completo. Las búsquedas clasificadas por campos, como "*título: foo*", van a un índice de búsqueda sintéticas donde no tienen el prefijo de términos por identificador del inquilino. En su lugar, las búsquedas clasificadas por campos llevan el prefijo con el nombre del campo. Por ejemplo, se convierte la consulta "*título: foo*" a "*fields.title:foo AND fields.tenantID*: <*guid*>." Debido a que la frecuencia de un término no influir en la clasificación de visitas en el índice de búsqueda sintéticas, no es necesario para la separación de inquilino anteponiendo términos. Separación de contenido de inquilino para una búsqueda clasificadas por campos como "*título: foo*", depende de identificador de inquilino filtrado por conversión de consulta.</span><span class="sxs-lookup"><span data-stu-id="b5207-p106">Tenant ID term prefixing occurs only in the full-text index. Fielded searches, such as "*title:foo*", go to a synthetic search index where terms aren't prefixed by tenant ID. Instead, fielded searches are prefixed with the field name. For example, the query "*title:foo*" is converted to "*fields.title:foo AND fields.tenantID*:<*guid*>." Because the frequency of a term doesn't influence ranking of hits in the synthetic search index, there's no need for tenant separation by term prefixing. For a fielded search like "*title:foo*", tenant content separation depends on tenant ID filtering by query conversion.</span></span>

## <a name="document-access-control-list-checks"></a><span data-ttu-id="b5207-134">Comprobaciones de lista de Control de acceso de documento</span><span class="sxs-lookup"><span data-stu-id="b5207-134">Document Access Control List Checks</span></span>
<span data-ttu-id="b5207-p107">Búsqueda controla el acceso a documentos a través de ACL que se guardan en el índice de búsqueda. Todos los elementos se indizan con un conjunto de términos en un campo ACL especial. El campo ACL contiene un término por grupos o usuarios que pueden ver el documento. Todas las consultas se incrementa con una lista de términos de entrada (ACE) de control de acceso, uno para cada grupo al que pertenece el usuario autenticado.</span><span class="sxs-lookup"><span data-stu-id="b5207-p107">Search controls access to documents through ACLs that are saved in the search index. Every item is indexed with a set of terms in a special ACL field. The ACL field contains one term per group or user that can view the document. Every query is augmented with a list of access control entry (ACE) terms, one for each group to which the authenticated user belongs.</span></span>

<span data-ttu-id="b5207-139">Por ejemplo, una consulta como "<*guid*>. *foo AND tenantID*: <*guid*> "se convierte en:" <*guid*>. *foo AND tenantID*: <*guid*> *AND* (*docACL:*<*ace1*> *OR docACL*: <*ace2*> *OR docACL*: <*ace3*> *... *)"</span><span class="sxs-lookup"><span data-stu-id="b5207-139">For example, a query like "<*guid*>.*foo AND tenantID*:<*guid*>" becomes: "<*guid*>.*foo AND tenantID*:<*guid*> *AND* (*docACL:*<*ace1*> *OR docACL*:<*ace2*> *OR docACL*:<*ace3*> *...*)"</span></span>

<span data-ttu-id="b5207-p108">Debido a que los identificadores de grupo y de usuario y, por tanto, las entradas ACE son únicas, esto proporciona un nivel adicional de seguridad entre los inquilinos para los documentos que sólo son visibles para algunos usuarios. El mismo es el caso de especial "todos excepto los usuarios externos" ACE que conceda acceso a los usuarios regulares en el inquilino. Pero, dado que las entradas ACE para "Todos" son los mismos para todos los inquilinos, separación de inquilino para los documentos públicos depende de filtrado de identificador del inquilino. También se admiten las entradas ACE de denegación. El aumento de la consulta agrega una cláusula que quita un documento desde el resultado cuando hay una coincidencia con una ACE de denegación.</span><span class="sxs-lookup"><span data-stu-id="b5207-p108">Because user and group identifiers and hence ACEs are unique, this provides an extra level of security between tenants for documents that are only visible to some users. The same is the case for the special "Everyone except external users" ACE that grants access to regular users in the tenant. But since ACEs for "Everyone" are the same for all tenants, tenant separation for public documents depends on tenant ID filtering. Deny ACEs are also supported. The query augmentation adds a clause that removes a document from the result when there is a match with a deny ACE.</span></span>

<span data-ttu-id="b5207-p109">En la búsqueda de Exchange Online, el índice se divide en identificador de buzón de correo para los buzones de usuario individual en lugar de identificador de inquilino (identificador de suscripción) como en SharePoint Online. El mecanismo de partición es el mismo que SharePoint Online, pero no hay ninguna ACL filtrado.</span><span class="sxs-lookup"><span data-stu-id="b5207-p109">In Exchange Online search, the index is partitioned on mailbox ID for individual user's mailboxes instead of tenant ID (subscription ID) as in SharePoint Online. The partitioning mechanism is the same as SharePoint Online, but there is no ACL filtering.</span></span>
