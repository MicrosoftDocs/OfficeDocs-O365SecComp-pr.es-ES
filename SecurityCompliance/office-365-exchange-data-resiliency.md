---
title: Resistencia de datos de Exchange de Office 365
ms.author: robmazz
author: robmazz
manager: laurawi
ms.date: 8/21/2018
audience: ITPro
ms.topic: article
ms.service: Office 365 Administration
localization_priority: None
search.appverid:
- MET150
ms.collection: Strat_O365_Enterprise
description: Una explicación de los distintos aspectos de la resistencia de datos dentro de Exchange Online y Office 365.
ms.openlocfilehash: 8d0448a95f010b766faf852a374513a1c2da61fa
ms.sourcegitcommit: 36c5466056cdef6ad2a8d9372f2bc009a30892bb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/27/2018
ms.locfileid: "22536090"
---
# <a name="exchange-online-data-resiliency-in-office-365"></a><span data-ttu-id="5cfca-103">Resistencia de datos en línea de Exchange en Office 365</span><span class="sxs-lookup"><span data-stu-id="5cfca-103">Exchange Online Data Resiliency in Office 365</span></span>

## <a name="introduction"></a><span data-ttu-id="5cfca-104">Introducción</span><span class="sxs-lookup"><span data-stu-id="5cfca-104">Introduction</span></span>
<span data-ttu-id="5cfca-p101">Hay dos tipos de daños que pueden afectar a una base de datos de Exchange: un daño físico, que normalmente está causado por problemas de hardware (en concreto, hardware de almacenamiento), y los daños lógicos, que se producen debido a otros factores. Por lo general, hay dos tipos de daños lógicos que pueden ocurrir dentro de una base de datos de Exchange:</span><span class="sxs-lookup"><span data-stu-id="5cfca-p101">There are two types of corruption that can affect an Exchange database: physical corruption, which is typically caused by hardware (in particular, storage hardware) problems, and logical corruption, which occurs due to other factors. Generally, there are two types of logical corruption that can occur within an Exchange database:</span></span> 
- <span data-ttu-id="5cfca-p102">**Daños lógicos de base de datos** - las coincidencias de suma de comprobación de página de base de datos, pero los datos en la página lógicamente es incorrecta. Esto puede no ocurrir cuando el motor de base de datos (el almacenamiento de motor Extensible (ESE)) intenta escribir una página de base de datos y, aunque el sistema operativo devuelve un mensaje de confirmación, los datos se nunca escribe en el disco o se escribe en el lugar incorrecto. Esto se conoce como un *perdido flush*. ESE incluye muchas características y medidas de seguridad que están diseñadas para evitar un daño físico de una base de datos y otros escenarios de pérdida de datos. Para impedir que pierda vaciados de la pérdida de datos, ESE incluye un mecanismo de detección de vaciado pérdida en la base de datos junto con una característica (restauración de página único) para corregirlo.</span><span class="sxs-lookup"><span data-stu-id="5cfca-p102">**Database logical corruption** - The database page checksum matches, but the data on the page is wrong logically. This can occur when the database engine (the Extensible Storage Engine (ESE)) attempts to write a database page and even though the operating system returns a success message, the data is either never written to the disk or it's written to the wrong place. This is referred to as a *lost flush*. ESE includes numerous features and safeguards that are designed to prevent physical corruption of a database and other data loss scenarios. To prevent lost flushes from losing data, ESE includes a lost flush detection mechanism in the database along with a feature (single page restore) to correct it.</span></span> 
- <span data-ttu-id="5cfca-p103">**Daños en el almacén lógico** - datos es agregado, eliminado o manipular de forma que el usuario no espera. Estos casos suelen deberse a aplicaciones de otros fabricantes. Por lo general es sólo los daños en el sentido de que el usuario ve como daños. El almacén de Exchange considera la transacción que generó el daño lógico para que sea una serie de operaciones de MAPI válidas. Las características de [Conservación local](https://docs.microsoft.com/exchange/security-and-compliance/create-or-remove-in-place-holds) de Exchange Online proporciona protección contra daños en el almacén lógico (debido a que impide que contenido va a eliminar permanentemente por un usuario o una aplicación).</span><span class="sxs-lookup"><span data-stu-id="5cfca-p103">**Store logical corruption** - Data is added, deleted, or manipulated in a way that the user doesn't expect. These cases are generally caused by third-party applications. It's generally only corruption in the sense that the user views it as corruption. The Exchange store considers the transaction that produced the logical corruption to be a series of valid MAPI operations. The [In-Place Hold](https://docs.microsoft.com/exchange/security-and-compliance/create-or-remove-in-place-holds) features in Exchange Online provides protection from store logical corruption (because it prevents content from being permanently deleted by a user or an application).</span></span> 

<span data-ttu-id="5cfca-p104">Exchange Online realiza varias comprobaciones de coherencia en los archivos de registro replicada durante la inspección de registro y reproducción de registro. Estas comprobaciones de coherencia evitar daños físicos desde que se replica por el sistema. Por ejemplo, durante la inspección de registro, es una comprobación de integridad física que comprueba el archivo de registro y valida que la suma de comprobación registrada en el archivo de registro coincide con la suma de comprobación generado en la memoria. Además, se examina el encabezado del archivo de registro para asegurarse de que la firma del archivo de registro registrada en el encabezado del registro coincide con el del archivo de registro. Durante la reproducción del registro, el archivo de registro se somete a aún más exigentes. Por ejemplo, el encabezado de la base de datos también contiene la firma del registro que se compara con la firma del archivo de registro para asegurarse de que coinciden.</span><span class="sxs-lookup"><span data-stu-id="5cfca-p104">Exchange Online performs several consistency checks on replicated log files during both log inspection and log replay. These consistency checks prevent physical corruption from being replicated by the system. For example, during log inspection, there is a physical integrity check which verifies the log file and validates that the checksum recorded in the log file matches the checksum generated in memory. In addition, the log file header is examined to make sure the log file signature recorded in the log header matches that of the log file. During log replay, the log file undergoes further scrutiny. For example, the database header also contains the log signature which is compared with the log file's signature to ensure they match.</span></span> 

<span data-ttu-id="5cfca-p105">Protección contra daños de datos de buzones de correo en Exchange Online se consigue usando Exchange Native Data Protection, una estrategia de resistencia que aprovecha la replicación de nivel de la aplicación a través de varios servidores y varios centros de datos junto con otros características que ayudan a proteger los datos de que se pierdan debido a daños o por otros motivos. Estas características incluyen las características nativas que son administradas por Microsoft o la aplicación Exchange Online propiamente dicha, tales como:</span><span class="sxs-lookup"><span data-stu-id="5cfca-p105">Protection against corruption of mailbox data in Exchange Online is achieved by using Exchange Native Data Protection, a resiliency strategy that leverages application-level replication across multiple servers and multiple datacenters along with other features that help protect data from being lost due to corruption or other reasons. These features include native features that are managed by Microsoft or the Exchange Online application itself, such as:</span></span>

- [<span data-ttu-id="5cfca-125">Grupos de disponibilidad de datos</span><span class="sxs-lookup"><span data-stu-id="5cfca-125">Data Availability Groups</span></span>](https://docs.microsoft.com/exchange/back-up-email)
- <span data-ttu-id="5cfca-126">Corrección de Bit único</span><span class="sxs-lookup"><span data-stu-id="5cfca-126">Single Bit Correction</span></span> 
- <span data-ttu-id="5cfca-127">Base de datos en línea de análisis</span><span class="sxs-lookup"><span data-stu-id="5cfca-127">Online Database Scanning</span></span> 
- <span data-ttu-id="5cfca-128">Detección de vaciado perdida</span><span class="sxs-lookup"><span data-stu-id="5cfca-128">Lost Flush Detection</span></span> 
- <span data-ttu-id="5cfca-129">Restauración de página único</span><span class="sxs-lookup"><span data-stu-id="5cfca-129">Single Page Restore</span></span> 
- <span data-ttu-id="5cfca-130">Servicio de replicación de buzón de correo</span><span class="sxs-lookup"><span data-stu-id="5cfca-130">Mailbox Replication Service</span></span> 
- <span data-ttu-id="5cfca-131">Comprobaciones de archivos de registro</span><span class="sxs-lookup"><span data-stu-id="5cfca-131">Log File Checks</span></span> 
- <span data-ttu-id="5cfca-132">Implementación en el sistema de archivos resistente</span><span class="sxs-lookup"><span data-stu-id="5cfca-132">Deployment on Resilient File System</span></span> 

<span data-ttu-id="5cfca-p106">Para obtener más información sobre las características nativas enumerados anteriormente, haga clic en los hipervínculos anteriores y vea a continuación para obtener información adicional y para obtener información detallada sobre los elementos sin hipervínculos. Además de estas características nativas, Exchange Online también incluye las características de resistencia de datos que los clientes pueden administrar, tales como:</span><span class="sxs-lookup"><span data-stu-id="5cfca-p106">For more information on the native features listed above, click on the above hyperlinks, and see below for additional information and for details on items without hyperlinks. In addition to these native features, Exchange Online also includes data resiliency features that customers can manage, such as:</span></span> 
- [<span data-ttu-id="5cfca-135">Recuperación de elemento único (habilitado de forma predeterminada)</span><span class="sxs-lookup"><span data-stu-id="5cfca-135">Single Item Recovery (enabled by default)</span></span>](https://docs.microsoft.com/exchange/recipients-in-exchange-online/manage-user-mailboxes/recover-deleted-messages) 
- [<span data-ttu-id="5cfca-136">Conservación local y retención por juicio</span><span class="sxs-lookup"><span data-stu-id="5cfca-136">In-Place Hold and Litigation Hold</span></span>](https://docs.microsoft.com/exchange/security-and-compliance/in-place-and-litigation-holds) 
- [<span data-ttu-id="5cfca-137">Eliminado retención de elementos y los buzones de correo Soft-Deleted (ambos habilitados de forma predeterminada)</span><span class="sxs-lookup"><span data-stu-id="5cfca-137">Deleted Item Retention and Soft-Deleted Mailboxes (both enabled by default)</span></span>](https://docs.microsoft.com/exchange/recipients-in-exchange-online/delete-or-restore-mailboxes) 

## <a name="database-availability-groups"></a><span data-ttu-id="5cfca-138">Grupos de disponibilidad de base de datos</span><span class="sxs-lookup"><span data-stu-id="5cfca-138">Database Availability Groups</span></span> 
<span data-ttu-id="5cfca-p107">Cada base de datos de buzones de correo en Office 365 está hospedado en un [grupo de disponibilidad de base de datos (DAG)](https://docs.microsoft.com/exchange/back-up-email) y se replican en centros de datos geográficamente independiente dentro de la misma región. La configuración más común es cuatro copias de base de datos en cuatro centros de datos; Sin embargo, algunas regiones tienen menos centros de datos (bases de datos se replican en tres centros de datos en la India y dos centros de datos en Australia y Japón). Pero, en todos los casos, cada base de datos de buzón de correo tiene cuatro copias que se distribuyen entre varios centros de datos, lo que garantiza que los datos de buzón de correo está protegidos contra software, hardware e incluso errores de centro de datos.</span><span class="sxs-lookup"><span data-stu-id="5cfca-p107">Every mailbox database in Office 365 is hosted in a [database availability group (DAG)](https://docs.microsoft.com/exchange/back-up-email) and replicated to geographically-separate datacenters within the same region. The most common configuration is four database copies in four datacenters; however, some regions have fewer datacenters (databases are replicated to three datacenters in India, and two datacenters in Australia and Japan). But in all cases, every mailbox database has four copies that are distributed across multiple datacenters, thereby ensuring that mailbox data is protected from software, hardware, and even datacenter failures.</span></span> 

<span data-ttu-id="5cfca-p108">Fuera de estos cuatro copias, tres de ellos se configuran como altamente disponibles. La cuarta copia está configurada como un [atrasadas copia de base de datos](https://docs.microsoft.com/Exchange/high-availability/manage-ha/activate-lagged-db-copies). La copia de la base de datos retardada no está pensada para la recuperación de buzones individuales o recuperación de elementos del buzón de correo. Su objetivo consiste en proporcionar un mecanismo de recuperación para el evento muy poco frecuente de todo el sistema, tras errores graves daños lógicos.</span><span class="sxs-lookup"><span data-stu-id="5cfca-p108">Out of these four copies, three of them are configured as highly available. The fourth copy is configured as a [lagged database copy](https://docs.microsoft.com/Exchange/high-availability/manage-ha/activate-lagged-db-copies). The lagged database copy is not intended for individual mailbox recovery or mailbox item recovery. Its purpose is to provide a recovery mechanism for the rare event of system-wide, catastrophic logical corruption.</span></span> 

<span data-ttu-id="5cfca-p109">Copias de base de datos atrasadas en Exchange Online están configuradas con un tiempo de retardo de reproducción de archivos de registro de siete días. Además, el Administrador de retardo de reproducción de Exchange está habilitado para proporcionar reproducir de archivo de registro dinámico hacia abajo para las copias retrasadas permitir que las copias de base de datos atrasadas reparación automática y administrar el crecimiento del archivo de registro. Aunque atrasadas en Exchange Online se usan copias de base de datos, es importante comprender que no son una copia de seguridad en un momento garantizada. Copias de base de datos atrasadas en Exchange Online tienen un umbral de disponibilidad, normalmente alrededor del 90%, debido a los períodos donde se pierde debido a un error de disco, la copia retrasada se convierta en un altamente disponible el disco que contiene una copia retrasada copiar (debido a la reproducción automática hacia abajo), así como como los períodos donde la copia de la base de datos atrasadas volver a generar el registro a la reproducción de cola.</span><span class="sxs-lookup"><span data-stu-id="5cfca-p109">Lagged database copies in Exchange Online are configured with a seven-day log file replay lag time. In addition, the Exchange Replay Lag Manager is enabled to provide dynamic log file play down for lagged copies to allow lagged database copies to self-repair and manage log file growth. Although lagged database copies are used in Exchange Online, it is important to understand that they are not a guaranteed point-in-time backup. Lagged database copies in Exchange Online have an availability threshold, typically around 90%, due to periods where the disk containing a lagged copy is lost due to disk failure, the lagged copy becoming a highly-available copy (due to automatic play down), as well as the periods where the lagged database copy is re-building the log replay queue.</span></span> 

## <a name="transport-resilience"></a><span data-ttu-id="5cfca-150">Resistencia de transporte</span><span class="sxs-lookup"><span data-stu-id="5cfca-150">Transport Resilience</span></span> 
<span data-ttu-id="5cfca-p110">Exchange Online incluye dos características de resistencia de transporte principal: redundancia de instantánea y la red de seguridad. Redundancia de instantánea mantiene una copia redundante de un mensaje mientras está en tránsito. Red de seguridad mantiene una copia redundante de un mensaje después de que el mensaje se entregó correctamente.</span><span class="sxs-lookup"><span data-stu-id="5cfca-p110">Exchange Online includes two primary transport resilience features: Shadow Redundancy and Safety Net. Shadow Redundancy keeps a redundant copy of a message while it is in transit. Safety Net keeps a redundant copy of a message after the message is successfully delivered.</span></span> 

<span data-ttu-id="5cfca-p111">Con redundancia de instantánea, cada servidor de transporte de Exchange Online realiza una copia de cada mensaje que recibe antes de que reconoce correctamente recibir el mensaje para el servidor de envío. Esto hace que todos los mensajes en la canalización de transporte redundantes mientras están en tránsito. Si Exchange Online determina que el mensaje original se ha perdido en tránsito, se vuelve a entregar una copia redundante del mensaje.</span><span class="sxs-lookup"><span data-stu-id="5cfca-p111">With Shadow Redundancy, each Exchange Online transport server makes a copy of each messages it receives before it acknowledges successfully receiving the message to the sending server. This makes all messages in the transport pipeline redundant while in transit. If Exchange Online determines the original message was lost in transit, a redundant copy of the message is redelivered.</span></span> 

<span data-ttu-id="5cfca-p112">Red de seguridad es una cola de transporte que está asociada con el servicio de transporte en un servidor de buzón de correo. Esta cola almacena copias de los mensajes que se han procesado correctamente por el servidor. Cuando un error de base de datos o servidor de buzón de correo requiere la activación de una copia caducada de la base de datos de buzones de correo, los mensajes en la cola de la red de seguridad se vuelven a enviar automáticamente a la nueva copia activa de la base de datos de buzón de correo. Red de seguridad también es redundante, lo que elimina transporte como un único punto de error. Usa el concepto de una red de seguridad principal y una red de seguridad de la sombra en el cual si la red principal de seguridad no está disponible durante más de 12 horas, vuelva a enviar solicitudes se convierten en las solicitudes de reenvío de sombra y los mensajes se vuelva a entregado desde la red de seguridad de sombra.</span><span class="sxs-lookup"><span data-stu-id="5cfca-p112">Safety Net is a transport queue that is associated with the Transport service on a Mailbox server. This queue stores copies of messages that were successfully processed by the server. When a mailbox database or server failure requires activating an out-of-date copy of the mailbox database, messages in the Safety Net queue are automatically resubmitted to the new active copy of the mailbox database. Safety Net is also redundant, thereby eliminating transport as a single point of failure. It uses the concept of a Primary Safety Net and a Shadow Safety Net wherein if the Primary Safety Net is unavailable for more than 12 hours, resubmit requests become shadow resubmit requests, and messages are re-delivered from the Shadow Safety Net.</span></span>

<span data-ttu-id="5cfca-p113">Reenvíos de mensaje de red de seguridad se inician automáticamente mediante el componente de administrador activo del servicio de replicación de Microsoft Exchange que administra el dag y buzón de correo de copias de base de datos. No hay acciones manuales son necesarias para volver a enviar los mensajes de red de seguridad.</span><span class="sxs-lookup"><span data-stu-id="5cfca-p113">Message resubmissions from Safety Net are automatically initiated by the Active Manager component of the Microsoft Exchange Replication service that manages DAGs and mailbox database copies. No manual actions are required to resubmit messages from Safety Net.</span></span> 

## <a name="single-bit-correction"></a><span data-ttu-id="5cfca-164">Corrección de Bit único</span><span class="sxs-lookup"><span data-stu-id="5cfca-164">Single Bit Correction</span></span> 
<span data-ttu-id="5cfca-p114">ESE incluye un mecanismo para detectar y resolver errores CRC de un solo bit (también conocido como bit único voltea) que son el resultado de errores de hardware (y, como tal, que representan un daño físico). Cuando se produzcan estos errores, ESE corrige automáticamente y registra un evento en el registro de eventos.</span><span class="sxs-lookup"><span data-stu-id="5cfca-p114">ESE includes a mechanism to detect and resolve single-bit CRC errors (aka single-bit flips) that are the result of hardware errors (and as such they represent physical corruption). When these errors occur, ESE automatically corrects them and logs an event in the event log.</span></span> 

## <a name="online-database-scanning"></a><span data-ttu-id="5cfca-167">Base de datos en línea de análisis</span><span class="sxs-lookup"><span data-stu-id="5cfca-167">Online Database Scanning</span></span> 
<span data-ttu-id="5cfca-p115">Base de datos en línea de examen (también conocido como *sumas de comprobación de base de datos*) es el proceso donde un ESE utiliza un comprobador de coherencia de la base de datos para cada página de lectura y comprobar posibles daños de página. El propósito principal es detectar un daño físico y pierden vaciados que no se pueden obtener detectar operaciones transaccionales. Análisis de la base de datos también realiza operaciones de bloqueo de almacenamiento posteriores a la. Puede haber pérdidas espacio debido a los bloqueos y análisis de la base de datos en línea buscan y recuperación el espacio perdido. El sistema está diseñado con la expectativa de que cada base de datos se analiza por completo una vez cada siete días.</span><span class="sxs-lookup"><span data-stu-id="5cfca-p115">Online database scanning (also known as *database checksumming*) is the process where an ESE uses a database consistency checker to read each page and check for page corruption. The primary purpose is to detect physical corruption and lost flushes that may not be getting detected by transactional operations. Database scanning also performs post-store crash operations. Space can be leaked due to crashes, and online database scanning finds and recovers lost space. The system is designed with the expectation that every database is fully scanned once every seven days.</span></span> 

## <a name="lost-flush-detection"></a><span data-ttu-id="5cfca-173">Detección de vaciado perdida</span><span class="sxs-lookup"><span data-stu-id="5cfca-173">Lost Flush Detection</span></span> 
<span data-ttu-id="5cfca-p116">Un vaciado pérdido se produce cuando una operación de escritura de la base de datos que el sistema operativo/subsistema de disco devuelto como completada en realidad no se escribieron para disco o se ha escrito en una ubicación incorrecta. Perdido incidentes vaciados puede resultado en daños lógicos de base de datos, por lo que para evitar que pierden vaciados resultante pérdida de datos, ESE incluye un mecanismo de detección de vaciado pierden. Como las páginas de la base de datos se escriben en copias pasivas, se realiza una comprobación para pierden vaciados de la copia activa. Si se detecta un vaciado pérdido, ESE puede reparar el proceso mediante una página de aplicación de revisiones de proceso.</span><span class="sxs-lookup"><span data-stu-id="5cfca-p116">A lost flush occurs when a database write operation that the disk subsystem/operating system returned as completed did not actually get written to disk, or was written in the wrong location. Lost flush incidents can result in database logical corruption, so to prevent lost flushes from resulting in lost data, ESE includes a lost flush detection mechanism. As database pages are written to passive copies, a check is performed for lost flushes on the active copy. If a lost flush is detected, ESE can repair the process using a page patching process.</span></span> 

## <a name="single-page-restore"></a><span data-ttu-id="5cfca-178">Restauración de página único</span><span class="sxs-lookup"><span data-stu-id="5cfca-178">Single Page Restore</span></span> 
<span data-ttu-id="5cfca-p117">Restauración de página único, también conocido como *aplicación de revisiones de página*, es un proceso automático donde las páginas de la base de datos dañado se reemplazan por copias correcto de una réplica correcta. El proceso de reparación de una página dañado depende de si la copia de la base de datos está activo o pasivo. Cuando encuentra una página dañada con una copia de la base de datos activa, puede copiar una página de uno de sus réplicas, siempre que la página copia está completamente actualizada. Esto se logra colocando una solicitud de la página en la secuencia de registro, que es la base de la replicación de base de datos de buzón de correo. Tan pronto como una réplica encuentra la solicitud de página responde mediante el envío de una copia de la página a la copia de base de datos que solicita. Restauración de página único también proporciona un mecanismo de comunicación asincrónica para la activa solicitar una página de réplicas, incluso si las réplicas están actualmente sin conexión.</span><span class="sxs-lookup"><span data-stu-id="5cfca-p117">Single page restore, aka *page patching*, is an automatic process where corrupt database pages are replaced by healthy copies from a healthy replica. The repair process for a corrupt page depends on whether the database copy is active or passive. When an active database copy encounters a corrupted page, it can copy a page from one of its replicas, provided the page it copies is completely up-to-date. This is accomplished by putting a request for the page into the log stream, which is the basis of mailbox database replication. As soon as a replica encounters the page request it responds by sending a copy of the page to the requesting database copy. Single page restore also provides an asynchronous communication mechanism for the active to request a page from replicas, even if the replicas are currently offline.</span></span> 

<span data-ttu-id="5cfca-p118">En el caso de daños en una copia pasiva de la base de datos, incluida una copia de base de datos atrasadas, debido a que estas copias siempre están detrás de su copia activa, siempre es más seguro copiar cualquier página de la copia activa a una copia pasiva. Una copia pasiva de la base de datos es por naturaleza altamente disponible, por lo que durante el proceso de aplicación de revisiones de la página, se suspende la reproducción de registro, pero la copia de registro continúa. La copia pasiva de la base de datos se recupera una copia de la página dañada de la copia activa, se espera hasta que el archivo de registro que cumple los requisitos de generación de registro necesario máximo se copia y puede inspeccionar y, a continuación, revisiones de la página dañada. Una vez que se ha revisado la página, se reanuda la reproducción del registro. El proceso es el mismo para la copia de la base de datos atrasadas, excepto en que la base de datos atrasada reproduce primero todos los archivos de registro que son necesarios para alcanzar un estado patchable.</span><span class="sxs-lookup"><span data-stu-id="5cfca-p118">In case of corruption in a passive database copy, including a lagged database copy, because these copies are always behind their active copy, it is always safe to copy any page from the active copy to a passive copy. A passive database copy is by nature highly available, so during the page patching process, log replaying is suspended, but log copying continues. The passive database copy retrieves a copy of the corrupted page from the active copy, waits until the log file which meets the maximum required log generation requirement is copied and inspected, and then patches the corrupt page. Once the page has been patched, log replay resumes. The process is the same for the lagged database copy, except that the lagged database first replays all log files that are necessary to achieve a patchable state.</span></span> 

## <a name="mailbox-replication-service"></a><span data-ttu-id="5cfca-190">Servicio de replicación de buzón de correo</span><span class="sxs-lookup"><span data-stu-id="5cfca-190">Mailbox Replication Service</span></span> 
<span data-ttu-id="5cfca-p119">Mover buzones es una parte clave de la administración de un servicio de correo electrónico a gran escala. Siempre son tecnologías actualizadas y las actualizaciones de hardware y la versión para abordar los problemas con, por lo que tener una sólida, limita el sistema que permite a nuestros ingenieros de llevar a cabo este trabajo mientras se mantiene el buzón se mueve transparente para los usuarios (asegurándose de que permanezcan en línea durante todo el proceso) es clave y asegurándose de que el proceso de escala hasta correctamente como buzones obtener mayores.</span><span class="sxs-lookup"><span data-stu-id="5cfca-p119">Moving mailboxes is a key part of managing a large-scale email service. There are always updated technologies and hardware and version upgrades to deal with, so having a robust, throttled system that enables our engineers to accomplish this work while keeping the mailbox moves transparent to users (by making sure they stay online throughout the process) is key and making sure that the process scales up gracefully as mailboxes get larger and larger.</span></span> 

<span data-ttu-id="5cfca-p120">El servicio de replicación de buzón (MRS) de Exchange es responsable de mover buzones entre bases de datos. Durante el traslado, Sra. lleva a cabo una comprobación de coherencia en todos los elementos dentro del buzón. Si se encuentra un problema de coherencia, MRS se corrija el problema u omitir los elementos dañados, y lo quita los daños desde el buzón de correo.</span><span class="sxs-lookup"><span data-stu-id="5cfca-p120">The Exchange Mailbox Replication Service (MRS) is responsible for moving mailboxes between databases. During the move, MRS performs a consistency check on all items within the mailbox. If a consistency issue is found, MRS will either correct the problem, or skip the corrupted items, thereby removing the corruption from the mailbox.</span></span> 

<span data-ttu-id="5cfca-p121">Debido a que MRS es un componente de Exchange Online, nos podemos realizar cambios en su código a dirección nuevos formularios de daños en la que se detectan en el futuro. Por ejemplo, si se detecta un problema de coherencia que MRS no es capaz de corregir, podemos analizar los daños, cambie el código de MRS y corregir la incoherencia (si se comprender cómo).</span><span class="sxs-lookup"><span data-stu-id="5cfca-p121">Because MRS is a component of Exchange Online, we can make changes in its code to address new forms of corruption that are detected in the future. For example, if we detect a consistency issue that MRS is not able to fix, we can analyze the corruption, change the MRS code and correct the inconsistency (if we understand how to).</span></span> 

## <a name="log-file-checks"></a><span data-ttu-id="5cfca-198">Comprobaciones de archivos de registro</span><span class="sxs-lookup"><span data-stu-id="5cfca-198">Log File Checks</span></span> 
<span data-ttu-id="5cfca-p122">Todos los archivos de registro de transacciones generados por una base de datos de Exchange sincronizan varios formularios de comprobaciones de coherencia. Cuando se crea un archivo de registro, es el listo lo primero que se escribe un patrón de bits y, a continuación, se lleva a cabo una serie de escrituras en el registro. Esto permite a Exchange Online ejecutar una serie de comprobaciones (flush pierden, CRC y otras comprobaciones) para validar cada archivo de registro, tal y como está escrito y vuelva a tal y como se replica.</span><span class="sxs-lookup"><span data-stu-id="5cfca-p122">All transaction log files generated by an Exchange database undergo several forms of consistency checks. When a log file is created, the first thing done is a bit pattern is written and then a series of log writes is performed. This enables Exchange Online to execute a series of checks (lost flush, CRC and other checks) to validate each log file as it is written, and again as it is replicated.</span></span> 

## <a name="deployment-on-resilient-file-system"></a><span data-ttu-id="5cfca-202">Implementación en el sistema de archivos resistente</span><span class="sxs-lookup"><span data-stu-id="5cfca-202">Deployment on Resilient File System</span></span> 
<span data-ttu-id="5cfca-p123">Para ayudar a evitar daños desde que se producen en el nivel de sistema de archivos, se está implementando el Exchange Online en las particiones de sistema de archivos resistente (ReFS) para proporcionar capacidades de recuperación mejorada. ReFS es un sistema de archivos en Windows Server 2012 y versiones posteriores que está diseñado para ser más resistente contra daños en los datos, desde allí, maximizar la integridad y la disponibilidad de los datos. En concreto, ReFS aporta mejoras en la forma en que los metadatos se actualizan lo que ofrece una mejor protección de datos y reduce los casos de daños de datos. También usa las sumas de comprobación para comprobar la integridad de los datos de archivo y metadatos asegurarse de que daños en los datos se encuentra fácilmente y se ha reparado.</span><span class="sxs-lookup"><span data-stu-id="5cfca-p123">To help prevent corruption from occurring at the file system level, Exchange Online is being deployed on Resilient File System (ReFS) partitions to provide improved recovery capabilities. ReFS is a file system in Windows Server 2012 and later that is designed to be more resilient against data corruption thereby maximizing data availability and integrity. Specifically, ReFS brings improvements in the way that metadata is updated which offers better protection for data and reduces data corruption cases. It also uses checksums to verify the integrity of file data and metadata ensuring that data corruption is easily found and repaired.</span></span> 

<span data-ttu-id="5cfca-207">Exchange Online aprovecha las ventajas ReFS:</span><span class="sxs-lookup"><span data-stu-id="5cfca-207">Exchange Online takes advantage of several ReFS benefits:</span></span> 
- <span data-ttu-id="5cfca-p124">Resistencia más en la integridad de los datos significa menos incidentes de daños de datos. Reducir el número de incidentes de daños significa menos retransferencias innecesarios de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="5cfca-p124">More resiliency in data integrity means fewer data corruption incidents. Reducing the number of corruption incidents means fewer unnecessary database reseeds.</span></span> 
- <span data-ttu-id="5cfca-210">Suma de comprobación que se ejecutan en metadatos habilitar detecciones de casos de daños antes y forma más determinista, lo que nos permite corregir los datos de cliente daños antes de que se producen errores gris en los volúmenes de datos.</span><span class="sxs-lookup"><span data-stu-id="5cfca-210">Checksum running on metadata enabling detections of corruption cases sooner and more deterministically, allowing us to fix customer data corruption before grey failures occur on data volumes.</span></span>
- <span data-ttu-id="5cfca-211">Diseñado para funcionar bien con conjuntos de datos muy grandes — petabytes y mayor: sin impacto en el rendimiento</span><span class="sxs-lookup"><span data-stu-id="5cfca-211">Designed to work well with extremely large data sets—petabytes and larger—without performance impact</span></span>
- <span data-ttu-id="5cfca-212">Compatibilidad con otras características que se usan por Exchange Online, como el cifrado de BitLocker.</span><span class="sxs-lookup"><span data-stu-id="5cfca-212">Support for other features used by Exchange Online, such as BitLocker encryption.</span></span> 

<span data-ttu-id="5cfca-213">Exchange Online también se beneficia de otras características ReFS:</span><span class="sxs-lookup"><span data-stu-id="5cfca-213">Exchange Online also benefits from other ReFS features:</span></span> 
- <span data-ttu-id="5cfca-p125">**Integridad (secuencias de integridad)** - ReFS almacena los datos de una manera que protege de muchos de los errores comunes que normalmente se pueden provocar la pérdida de datos. Búsqueda de Office 365 usa secuencias de integridad para ayudar con la detección de daños disco anticipado y sumas de comprobación de contenido del archivo. La característica también reduce los incidentes de daños causados por "Rasgado escribe" (cuando una operación de escritura no se completa debido a cortes en la alimentación, etcetera.).</span><span class="sxs-lookup"><span data-stu-id="5cfca-p125">**Integrity (Integrity Streams)** - ReFS stores data in a way that protects it from many of the common errors that can normally cause data loss. Office 365 Search uses Integrity Streams to help with early disk corruption detection and checksums of file content. The feature also reduces corruption incidents caused by “Torn Writes” (when a write operation does not complete due to power outages, etc.).</span></span> 
- <span data-ttu-id="5cfca-p126">**Disponibilidad (residual)** - ReFS da prioridad a la disponibilidad de los datos. Tradicionalmente, los sistemas de archivos a menudo no eran susceptibles a daños en los datos que requieran la consultarse sin conexión para reparar el sistema. Aunque poco frecuente, si se producen daños, implementa ReFS residual, una característica que quita los datos dañados desde el espacio de nombres en un volumen activo y se asegura de que datos en buen estado no se ve afectadas negativamente por no reparable datos dañados. Aplicar la característica de residual y aislar los daños en los datos a volúmenes de base de datos de Exchange Online significan que podemos mantener las bases de datos no afectado en un volumen dañado correcto entre el momento de la acción de reparación y dañado. Esto aumenta la disponibilidad de bases de datos que normalmente se ve afectada por dichos problemas de daños en el disco.</span><span class="sxs-lookup"><span data-stu-id="5cfca-p126">**Availability (Salvage)** - ReFS prioritizes the availability of data. Historically, file systems were often susceptible to data corruption that would require the system to be taken offline for repair. Although rare, if corruption does occur, ReFS implements salvage, a feature that removes the corrupt data from the namespace on a live volume and ensures that good data is not adversely affected by non-repairable corrupt data. Applying the Salvage feature and isolating data corruption to Exchange Online database volumes means that we can keep non-affected databases on a corrupted volume healthy between the time of corruption and repair action. This increases the availability of databases that would normally be affected by such disk corruption issues.</span></span> 