---
title: Aislamiento y control de acceso de Office 365 en Office 365
ms.author: robmazz
author: robmazz
manager: laurawi
ms.date: 8/21/2018
audience: ITPro
ms.topic: article
ms.service: O365-seccomp
localization_priority: None
search.appverid:
- MET150
ms.collection:
- Strat_O365_IP
- M365-security-compliance
description: 'Resumen: una explicación del aislamiento y el control de acceso dentro de las distintas aplicaciones de Office 365.'
ms.openlocfilehash: 734c92a6f3185a25faf9aade1ba235444ed762da
ms.sourcegitcommit: f57b4001ef1327f0ea622e716a4d7d78f1769b49
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 02/23/2019
ms.locfileid: "30216860"
---
# <a name="isolation-and-access-control-in-office-365"></a><span data-ttu-id="5e0b8-103">Aislamiento y Control de acceso en Office 365</span><span class="sxs-lookup"><span data-stu-id="5e0b8-103">Isolation and Access Control in Office 365</span></span>

<span data-ttu-id="5e0b8-p101">Azure Active Directory y Office 365 usan un modelo de datos muy complejo que incluye decenas de servicios, cientos de entidades, miles de relaciones y decenas de miles de atributos (las entidades, las relaciones y los atributos suelen ser específicos de las aplicaciones). En un nivel alto, Azure Active Directory y los directorios de servicio son los contenedores de los inquilinos y los destinatarios, y se mantienen sincronizados mediante protocolos de replicación basados en el estado. Además de la información de directorio contenida en Azure Active Directory, cada uno de los servicios también tiene su propia infraestructura de servicios de directorio (por ejemplo, servicios de directorio de Exchange Online, servicios de directorio de SharePoint Online, etc.).</span><span class="sxs-lookup"><span data-stu-id="5e0b8-p101">Azure Active Directory and Office 365 use a highly complex data model that includes tens of services, hundreds of entities, thousands of relationships, and tens of thousands of attributes (entities, relationships and attributes are often application-specific). At a high level, Azure Active Directory and the service directories are the containers of tenants and recipients, and they are kept in sync using state-based replication protocols. In addition to the directory information held within Azure Active Directory, each of the services also have their own directory services infrastructure (e.g., Exchange Online Directory Services, SharePoint Online Directory Services, etc.).</span></span> 
 
![Sincronización de datos del espacio empresarial de Office 365](media/office-365-isolation-tenant-data-sync.png)

<span data-ttu-id="5e0b8-p102">Dentro de este modelo, no hay un único origen de datos de directorio. Cada dato individual es propiedad de un sistema específico, pero ningún sistema único contiene todos los datos. Los servicios de Office 365 cooperan con Azure Active Directory para obtener el modelo de datos. Azure Active Directory es el "sistema de verdad" para datos compartidos, que normalmente son datos pequeños y estáticos que se usan con frecuencia en cada servicio. El modelo federado usado en Office 365 y Azure Active Directory proporciona la vista compartida de los datos.</span><span class="sxs-lookup"><span data-stu-id="5e0b8-p102">Within this model, there is no single source of directory data. Every individual piece of data is owned by a specific system, but no single system holds all the data. Office 365 services cooperate with Azure Active Directory to realize the data model. Azure Active Directory is the "system of truth" for shared data, which is typically small and static data used often by every service. The federated model used within Office 365 and Azure Active Directory provides the shared view of the data.</span></span>

<span data-ttu-id="5e0b8-p103">Office 365 usa el almacenamiento físico y el almacenamiento en la nube de Azure. Exchange Online (incluida la protección en línea de Exchange) y Skype empresarial usan su propio almacenamiento para los datos de clientes. SharePoint Online aprovecha tanto el almacenamiento de SQL Server como el almacenamiento de Azure, lo que requiere la necesidad de un aislamiento adicional de los datos de cliente en el nivel de almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="5e0b8-p103">Office 365 uses both physical storage and Azure cloud storage. Exchange Online (including Exchange Online Protection) and Skype for Business use their own storage for customer data. SharePoint Online leverages both its SQL Server storage and Azure storage, which necessitates the need for additional isolation of customer data at the storage level.</span></span>

## <a name="exchange-online"></a><span data-ttu-id="5e0b8-116">Exchange Online</span><span class="sxs-lookup"><span data-stu-id="5e0b8-116">Exchange Online</span></span>
<span data-ttu-id="5e0b8-p104">Exchange Online almacena los datos de los clientes en buzones que se hospedan en bases de datos del motor de almacenamiento extensible (ESE) denominadas bases de datos de buzones de correo. Esto incluye los buzones de usuario, los buzones vinculados, los buzones compartidos y los buzones de carpetas públicas. Los buzones de usuario también pueden incluir contenido guardado de Skype empresarial, como historiales de conversaciones. El contenido de los buzones de usuario incluye correos electrónicos y datos adjuntos de correo electrónico, calendario y información de disponibilidad, contactos, tareas, notas, grupos y datos de inferencia.</span><span class="sxs-lookup"><span data-stu-id="5e0b8-p104">Exchange Online stores customer data within mailboxes that are hosted within Extensible Storage Engine (ESE) databases called mailbox databases. This includes user mailboxes, linked mailboxes, shared mailboxes and public folder mailboxes. User mailboxes may also include saved Skype for Business content, such as conversation histories. User mailbox content includes emails and email attachments, calendaring and free/busy information, contacts, tasks, notes, Groups, and inference data.</span></span>

<span data-ttu-id="5e0b8-p105">Cada base de datos de buzones de correo de Exchange Online contiene buzones de varios inquilinos. Todos los buzones de correo están protegidos por código de autorización, incluso dentro de un arrendamiento. Al igual que con una implementación local de Exchange, de forma predeterminada, solo el usuario asignado tiene acceso a un buzón. La lista de control de acceso (ACL) que protege a un buzón de correo contiene una identidad autenticada por Azure Active Directory en el nivel de espacio empresarial. Los buzones de un inquilino determinado se limitan a identidades autenticadas en el proveedor de autenticación de ese inquilino, que solo incluyen usuarios de ese espacio empresarial. El contenido que pertenece al espacio empresarial no se puede obtener de ninguna manera por los usuarios de TenantB, a menos que el espacio empresarial lo apruebe explícitamente.</span><span class="sxs-lookup"><span data-stu-id="5e0b8-p105">Each mailbox database within Exchange Online contains mailboxes from multiple tenants. All mailboxes are secured by authorization code, including within a tenancy. As with an on-premises deployment of Exchange, by default only the assigned user has access to a mailbox. The access control list (ACL) that secures a mailbox contains an identity that is authenticated by Azure Active Directory at the tenant level. The mailboxes for a given tenant are limited to identities authenticated against that tenant's authentication provider, which include only users from that tenant. Content belonging to TenantA cannot in any way be obtained by users in TenantB, unless explicitly approved by TenantA.</span></span>

## <a name="skype-for-business"></a><span data-ttu-id="5e0b8-127">Skype Empresarial</span><span class="sxs-lookup"><span data-stu-id="5e0b8-127">Skype for Business</span></span>
<span data-ttu-id="5e0b8-128">Skype empresarial almacena datos en una amplia variedad de lugares:</span><span class="sxs-lookup"><span data-stu-id="5e0b8-128">Skype for Business stores data in a variety of places:</span></span>
- <span data-ttu-id="5e0b8-p106">La información de usuarios y cuentas, que incluye los extremos de conexión, los identificadores de inquilino, los planes de marcado, la configuración de itinerancia, el estado de presencia, las listas de contactos, etc., se almacena en los servidores de Active Directory de Skype empresarial, así como en varias bases de datos de Skype empresarial. servidores. Las listas de contactos se almacenan en el buzón de correo de Exchange online del usuario si el usuario está habilitado para ambos productos o en servidores de Skype empresarial si el usuario no lo está. Los servidores de base de datos de Skype empresarial no tienen particiones por inquilino, pero el aislamiento de datos de varios inquilinos se aplica a través de RBAC.</span><span class="sxs-lookup"><span data-stu-id="5e0b8-p106">User and account information, which includes connection endpoints, tenant IDs, dial plans, roaming settings, presence state, contact lists, etc., is stored in the Skype for Business Active Directory servers, as well as in various Skype for Business database servers. Contact lists are stored in the user's Exchange Online mailbox if the user is enabled for both products, or on Skype for Business servers if the user is not. Skype for Business database servers are not partitioned per-tenant, but multi-tenancy isolation of data is enforced through RBAC.</span></span>
- <span data-ttu-id="5e0b8-p107">El contenido de la reunión, como los usuarios de contenido que se cargan durante las reuniones de Skype empresarial, se almacena en recursos compartidos del sistema de archivos distribuido. Este contenido también se puede archivar en Exchange Online el archivado proporcionado está habilitado. Los recursos compartidos DFS no tienen particiones por inquilino, pero el contenido está protegido con ACL y la función de multiinquilino se aplica a través de RBAC.</span><span class="sxs-lookup"><span data-stu-id="5e0b8-p107">Meeting content, such as content users upload during Skype for Business meetings, is stored on Distributed File System shares. This content can also be archived in Exchange Online provided archiving is enabled. The DFS shares are not partitioned per-tenant but the content is secured with ACLs and multi-tenancy is enforced through RBAC.</span></span>
- <span data-ttu-id="5e0b8-p108">Los registros de detalles de llamadas, que son el historial de actividades, como el historial de llamadas, las sesiones de mensajería instantánea, el uso compartido de aplicaciones, el historial de mi, etc., también se pueden almacenar en Exchange Online, pero la mayoría de los registros de detalles de llamadas se almacenan temporalmente en los servidores de registro de detalles de llamadas (CDR). El contenido no se divide en particiones por inquilino, pero la función de multiinquilino se aplica a través de RBAC.</span><span class="sxs-lookup"><span data-stu-id="5e0b8-p108">Call detail records, which is the activity history, such as call history, IM sessions, application sharing, IM history, etc., can also be stored in Exchange Online, but most call detail records are temporarily stored on call detail record (CDR) servers. Content is not partitioned per tenant, but multi-tenancy is enforced through RBAC.</span></span>

## <a name="sharepoint-online"></a><span data-ttu-id="5e0b8-137">SharePoint Online</span><span class="sxs-lookup"><span data-stu-id="5e0b8-137">SharePoint Online</span></span>
<span data-ttu-id="5e0b8-p109">Hay varios mecanismos independientes exclusivos de SharePoint Online que proporcionan aislamiento de datos. SharePoint Online almacena objetos como código abstracto dentro de las bases de datos de la aplicación. Por ejemplo, cuando un usuario carga un archivo en SharePoint Online, ese archivo se desmonta y se traduce a código de aplicación y se almacena en varias tablas en varias bases de datos.</span><span class="sxs-lookup"><span data-stu-id="5e0b8-p109">There are several independent mechanisms unique to SharePoint Online that provide data isolation. SharePoint Online stores objects as abstracted code within application databases. For example, when a user uploads a file to SharePoint Online, that file is disassembled and translated into application code and stored in multiple tables across multiple databases.</span></span>

<span data-ttu-id="5e0b8-p110">Si un usuario puede obtener acceso directo al almacenamiento que contiene los datos, el contenido no se puede interpretar como un usuario ni un sistema que no sea SharePoint Online. Estos mecanismos incluyen las propiedades y el control de acceso de seguridad. Como se ha descrito anteriormente, todos los recursos de SharePoint Online están protegidos por el código de autorización y la Directiva RBAC, incluso dentro de un arrendamiento. La lista de control de acceso (ACL) que protege a un recurso contiene una identidad que se autentica en el nivel de inquilino. Al igual que con Exchange Online, en SharePoint Online, los datos de un inquilino determinado se limitan a identidades autenticadas en el proveedor de autenticación de ese inquilino, que solo incluyen usuarios de ese espacio empresarial.</span><span class="sxs-lookup"><span data-stu-id="5e0b8-p110">If a user could gain direct access to the storage containing the data, the content would not be interpretable to a human or any system other than SharePoint Online. These mechanisms include security access control and properties. As described above, all SharePoint Online resources are secured by the authorization code and RBAC policy, including within a tenancy. The access control list (ACL) that secures a resource contains an identity that is authenticated at the tenant level. As with Exchange Online, in SharePoint Online, data for a given tenant are limited to identities authenticated against that tenant's authentication provider, which include only users from that tenant.</span></span>

<span data-ttu-id="5e0b8-p111">Además de las ACL, una propiedad de nivel de inquilino que especifica el proveedor de autenticación (que es el Azure Active Directory específico del inquilino), se escribe una vez y no se puede cambiar una vez establecido. Una vez que se ha establecido la propiedad de inquilino de proveedor de autenticación para un espacio empresarial, no se puede cambiar mediante ninguna API expuesta a un inquilino.</span><span class="sxs-lookup"><span data-stu-id="5e0b8-p111">In addition to the ACLs, a tenant level property that specifies the authentication provider (which is the tenant-specific Azure Active Directory), is written once and cannot be changed once set. Once the authentication provider tenant property has been set for a tenant, it cannot be changed using any APIs exposed to a tenant.</span></span>

<span data-ttu-id="5e0b8-p112">También se usa un *SubscriptionId* único para cada inquilino. Todos los sitios de clientes son propiedad de un espacio empresarial y tienen asignado un *SubscriptionId* único para el inquilino. La propiedad *SubscriptionId* de un sitio se ha escrito una vez y no se puede cambiar. Una vez que se asigna un sitio a un inquilino, no se puede mover a un inquilino diferente más adelante mediante la API de almacén de contenido. *SubscriptionId* también es la clave que se usa para crear el ámbito de seguridad para el proveedor de autenticación y está ligada al espacio empresarial.</span><span class="sxs-lookup"><span data-stu-id="5e0b8-p112">A unique *SubscriptionId* is also used for each tenant. All customer sites are owned by a tenant and are assigned a *SubscriptionId* unique to the tenant. The *SubscriptionId* property on a site is written once and cannot be changed. Once a site is assigned to a tenant, it cannot be moved to a different tenant later using the content store API. The *SubscriptionId* is also the key that is used to create the security scope for the authentication provider and is tied to the tenant.</span></span>

<span data-ttu-id="5e0b8-p113">SharePoint Online usa SQL Server y Azure Storage para el almacenamiento de contenido. En el nivel de SQL, la clave de partición del almacén de contenido es *SiteId*. Cuando se ejecuta una consulta SQL, SharePoint Online usa un *SiteId* que se ha comprobado como parte de una comprobación de *SubscriptionId* a nivel de inquilino.</span><span class="sxs-lookup"><span data-stu-id="5e0b8-p113">SharePoint Online uses SQL Server and Azure storage for the storing of content. At the SQL level, the partition key for the content store is *SiteId*. When running a SQL query, SharePoint Online uses a *SiteId* that has been verified as part of a tenant-level *SubscriptionId* check.</span></span>

<span data-ttu-id="5e0b8-p114">SharePoint Online almacena blobs binarios de archivo (por ejemplo, las secuencias de archivos) en Microsoft Azure. Cada granja de servidores de SharePoint Online tiene su propia cuenta de Microsoft Azure y todos los blobs guardados en Azure se cifran individualmente con una clave que se almacena en el almacén de contenido de SQL. La clave de cifrado no se expone directamente al usuario final y está protegida en el código por la capa de autorización. Por último, SharePoint Online tiene una supervisión en tiempo real para detectar cuándo una solicitud HTTP lee o escribe datos para más de un espacio empresarial. Para ello, realiza un seguimiento del *subscriptionId* de la identidad de solicitud con el *subscriptionId* del recurso al que se está accediendo. Una solicitud que tiene acceso a recursos de más de un espacio empresarial nunca debe realizarla el usuario final. Sin embargo, puede suceder para solicitudes de servicio en un entorno de varios inquilinos. Por ejemplo, el rastreador de búsqueda extrae los cambios de contenido de toda la base de datos a la vez. Normalmente esto implica consultar sitios de más de un espacio empresarial en una sola solicitud de servicio, que se realiza por motivos de eficiencia.</span><span class="sxs-lookup"><span data-stu-id="5e0b8-p114">SharePoint Online stores file binary blobs (e.g., the file streams) in Microsoft Azure. Each SharePoint Online farm has its own Microsoft Azure account and all the blobs saved in Azure are encrypted individually using a key that is stored in the SQL content store. The encryption key is not exposed directly to the end user, and is protected in code by the authorization layer. Finally, SharePoint Online has real-time monitoring in place to detect when an HTTP request reads or writes data for more than one tenant. It does this by tracking the *SubscriptionId* of the request identity against the *SubscriptionId* of the resource being accessed. A request accessing resources of more than one tenant should never happen by end-user. It can happen for service requests in a multi-tenant environment, though. For example, the search crawler pulls content changes for an entire database all at once. This usually involves querying sites of more than one tenant in a single service request, which is done for efficiency reasons.</span></span>
