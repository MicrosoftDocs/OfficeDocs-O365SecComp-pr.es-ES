---
title: Crear una consulta para buscar datos confidenciales almacenados en los sitios
ms.author: stephow
author: stephow-MSFT
manager: laurawi
ms.date: 6/29/2018
ms.audience: Admin
ms.topic: article
ms.service: O365-seccomp
localization_priority: Normal
search.appverid:
- MOE150
- MET150
ms.assetid: 3019fbc5-7f15-4972-8d0e-dc182dc7f836
description: Con la prevención de pérdida de datos (DLP) en SharePoint Online, puede detectar documentos que contengan datos confidenciales en todo el espacio empresarial. Una vez detectados los documentos, puede trabajar con los propietarios de documentos para proteger los datos. Este tema puede ayudarle a formar una consulta para buscar datos confidenciales.
ms.openlocfilehash: 3dc1081d4627f1a26c50eed84f733c31a3f6c194
ms.sourcegitcommit: f57b4001ef1327f0ea622e716a4d7d78f1769b49
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 02/23/2019
ms.locfileid: "30217240"
---
# <a name="form-a-query-to-find-sensitive-data-stored-on-sites"></a><span data-ttu-id="2e33a-105">Crear una consulta para buscar datos confidenciales almacenados en los sitios</span><span class="sxs-lookup"><span data-stu-id="2e33a-105">Form a query to find sensitive data stored on sites</span></span>

<span data-ttu-id="2e33a-p102">Los usuarios suelen almacenar datos confidenciales, como números de tarjetas de crédito, números de la seguridad social o personal, en sus sitios y con el tiempo, esto puede exponer a una organización a un riesgo significativo de pérdida de datos. Los documentos almacenados en sitios, incluidos los sitios de OneDrive para la empresa, se pueden compartir con personas de fuera de la organización que no deberían tener acceso a la información. Con la prevención de pérdida de datos (DLP) en SharePoint Online, puede detectar documentos que contengan datos confidenciales en todo el espacio empresarial. Una vez detectados los documentos, puede trabajar con los propietarios de documentos para proteger los datos. Este tema puede ayudarle a formar una consulta para buscar datos confidenciales.</span><span class="sxs-lookup"><span data-stu-id="2e33a-p102">Users often store sensitive data, such as credit card numbers, social security numbers, or personal, on their sites, and over time this can expose an organization to significant risk of data loss. Documents stored on sites—including OneDrive for Business sites—could be shared with people outside the organization who shouldn't have access to the information. With data loss prevention (DLP) in SharePoint Online, you can discover documents that contain sensitive data throughout your tenant. After discovering the documents, you can work with the document owners to protect the data. This topic can help you form a query to search for sensitive data.</span></span>
  
> [!NOTE]
> <span data-ttu-id="2e33a-111">El descubrimiento electrónico o la DLP son características Premium que requieren [SharePoint Online plan 2](https://go.microsoft.com/fwlink/?LinkId=510080).</span><span class="sxs-lookup"><span data-stu-id="2e33a-111">Electronic discovery, or eDiscovery, and DLP are premium features that require [SharePoint Online Plan 2](https://go.microsoft.com/fwlink/?LinkId=510080).</span></span> 
  
## <a name="forming-a-basic-dlp-query"></a><span data-ttu-id="2e33a-112">Formación de una consulta básica de DLP</span><span class="sxs-lookup"><span data-stu-id="2e33a-112">Forming a basic DLP query</span></span>

<span data-ttu-id="2e33a-p103">Hay tres partes que conforman una consulta de DLP básica: SensitiveType, intervalo de recuento y intervalo de confianza. Tal y como se muestra en el siguiente gráfico, se requiere **SensitiveType: "\<\>Type"** y tanto**|\<el intervalo\> \*\* de recuento como el intervalo**|\<\> de confianza\*\* son opcionales.</span><span class="sxs-lookup"><span data-stu-id="2e33a-p103">There are three parts that make up a basic DLP query: SensitiveType, count range, and confidence range. As illustrated in the following graphic, **SensitiveType:"\<type\>"** is required, and both**|\<count range\>** and**|\<confidence range\>** are optional.</span></span> 
  
![Consulta de ejemplo dividida entre obligatorio y opcional](media/DLP-query-example-text.png)
  
### <a name="sensitive-type---required"></a><span data-ttu-id="2e33a-116">Tipo confidencial: obligatorio</span><span class="sxs-lookup"><span data-stu-id="2e33a-116">Sensitive type - required</span></span>

<span data-ttu-id="2e33a-p104">Entonces, ¿qué es cada parte? Las consultas de DLP de SharePoint normalmente comienzan `SensitiveType:"` con la propiedad y un nombre de tipo de información desde el inventario de tipos de `"` [información confidencial](https://go.microsoft.com/fwlink/?LinkID=509999)y terminan con un. También puede usar el nombre de un [tipo personalizado de información confidencial](create-a-custom-sensitive-information-type.md) que haya creado para su organización. Por ejemplo, es posible que le interese buscar documentos que contengan números de tarjetas de crédito. En dicha instancia, use el siguiente formato: `SensitiveType:"Credit Card Number"`. Como no incluyó intervalo de recuento o intervalo de confianza, la consulta devuelve todos los documentos en los que se detecta un número de tarjeta de crédito. Esta es la consulta más sencilla que puede ejecutar y devuelve más resultados. Tenga en cuenta que los aspectos ortográficos y de espaciado del tipo confidencial son importantes.</span><span class="sxs-lookup"><span data-stu-id="2e33a-p104">So what is each part? SharePoint DLP queries typically begin with the property  `SensitiveType:"` and an information type name from the [sensitive information types inventory](https://go.microsoft.com/fwlink/?LinkID=509999), and end with a  `"`. You can also use the name of a [custom sensitive information type](create-a-custom-sensitive-information-type.md) that you created for your organization. For example, you might be looking for documents that contain credit card numbers. In such an instance, you'd use the following format:  `SensitiveType:"Credit Card Number"`. Because you didn't include count range or confidence range, the query returns every document in which a credit card number is detected. This is the simplest query that you can run, and it returns the most results. Keep in mind that the spelling and spacing of the sensitive type matters.</span></span> 
  
### <a name="ranges---optional"></a><span data-ttu-id="2e33a-125">Intervalos: opcionales</span><span class="sxs-lookup"><span data-stu-id="2e33a-125">Ranges - optional</span></span>

<span data-ttu-id="2e33a-p105">Las dos partes siguientes son rangos, así que vamos a examinar rápidamente qué aspecto tiene un rango. En las consultas de DLP de SharePoint, un intervalo básico se representa mediante dos números separados por dos puntos, que tiene `[number]..[number]`el siguiente aspecto:. Por ejemplo, si `10..20` se usa, ese intervalo podría capturar números de 10 a 20. En este tema se tratan muchas combinaciones de rangos diferentes y varias.</span><span class="sxs-lookup"><span data-stu-id="2e33a-p105">Both of the next two parts are ranges, so let's quickly examine what a range looks like. In SharePoint DLP queries, a basic range is represented by two numbers separated by two periods, which looks like this:  `[number]..[number]`. For instance, if  `10..20` is used, that range would capture numbers from 10 through 20. There are many different range combinations and several are covered in this topic.</span></span> 
  
<span data-ttu-id="2e33a-p106">Vamos a agregar un intervalo de recuento a la consulta. Puede usar el intervalo de recuento para definir el número de repeticiones de información confidencial que debe contener un documento antes de que se incluya en los resultados de la consulta. Por ejemplo, si desea que la consulta devuelva sólo documentos que contengan exactamente cinco números de tarjeta de crédito `SensitiveType:"Credit Card Number|5"`, use lo siguiente:. El intervalo de reCuento también puede ayudarle a identificar los documentos que plantean altos niveles de riesgo. Por ejemplo, su organización puede considerar que los documentos con cinco o más números de tarjeta de crédito tienen un riesgo alto. Para buscar documentos que se ajusten a este criterio, debe usar `SensitiveType:"Credit Card Number|5.."`esta consulta:. Como alternativa, puede buscar documentos con cinco o menos números de tarjeta de crédito con esta consulta: `SensitiveType:"Credit Card Number|..5"`.</span><span class="sxs-lookup"><span data-stu-id="2e33a-p106">Let's add a count range to the query. You can use count range to define the number of occurrences of sensitive information a document needs to contain before it's included in the query results. For example, if you want your query to return only documents that contain exactly five credit card numbers, use this:  `SensitiveType:"Credit Card Number|5"`. Count range can also help you identify documents that pose high degrees of risk. For example, your organization might consider documents with five or more credit card numbers a high risk. To find documents fitting this criterion, you would use this query:  `SensitiveType:"Credit Card Number|5.."`. Alternatively, you can find documents with five or fewer credit card numbers by using this query:  `SensitiveType:"Credit Card Number|..5"`.</span></span> 
  
#### <a name="confidence-range"></a><span data-ttu-id="2e33a-137">Intervalo de confianza</span><span class="sxs-lookup"><span data-stu-id="2e33a-137">Confidence range</span></span>

<span data-ttu-id="2e33a-p107">Por último, el intervalo de confianza es el nivel de confianza que el tipo confidencial detectado es realmente una coincidencia. Los valores del intervalo de confianza funcionan de manera similar al intervalo de recuento. Puede crear una consulta sin incluir un intervalo de recuento. Por ejemplo, para buscar documentos con cualquier número de números de tarjetas de crédito, siempre que el intervalo de confianza sea del 85 por ciento o superior, debería usar esta `SensitiveType:"Credit Card Number|*|85.."`consulta:.</span><span class="sxs-lookup"><span data-stu-id="2e33a-p107">Finally, confidence range is the level of confidence that the detected sensitive type is actually a match. The values for confidence range work similarly to count range. You can form a query without including a count range. For example, to search for documents with any number of credit card numbers—as long as the confidence range is 85 percent or higher—you would use this query:  `SensitiveType:"Credit Card Number|*|85.."`.</span></span> 
  
> [!IMPORTANT]
> <span data-ttu-id="2e33a-p108">El asterisco ( `*`) es un carácter comodín que significa que cualquier valor funciona. Puede usar el carácter comodín ( `*`) tanto en el intervalo de recuento como en el intervalo de confianza, pero no en un tipo confidencial.</span><span class="sxs-lookup"><span data-stu-id="2e33a-p108">The asterisk ( `*`) is a wildcard character that means any value works. You can use the wildcard character ( `*`) either in the count range or in the confidence range, but not in a sensitive type.</span></span> 
  
### <a name="additional-query-properties-and-search-operators-available-in-the-ediscovery-center"></a><span data-ttu-id="2e33a-144">Propiedades de consulta y operadores de búsqueda adicionales disponibles en el centro de exhibición de documentos electrónicos</span><span class="sxs-lookup"><span data-stu-id="2e33a-144">Additional query properties and search operators available in the eDiscovery Center</span></span>

<span data-ttu-id="2e33a-p109">DLP en SharePoint también presenta la propiedad LastSensitiveContentScan, que puede ayudarle a buscar archivos examinados dentro de un período de tiempo específico. Para obtener ejemplos de consultas `LastSensitiveContentScan` con la propiedad, vea los [ejemplos de consultas complejas](form-a-query-to-find-sensitive-data-stored-on-sites.md#BKMK_ExamplesOfComplexQueries) en la siguiente sección.</span><span class="sxs-lookup"><span data-stu-id="2e33a-p109">DLP in SharePoint also introduces the LastSensitiveContentScan property, which can help you search for files scanned within a specific timeframe. For query examples with the  `LastSensitiveContentScan` property, see the [Examples of complex queries](form-a-query-to-find-sensitive-data-stored-on-sites.md#BKMK_ExamplesOfComplexQueries) in the next section.</span></span> 
  
<span data-ttu-id="2e33a-p110">No solo puede usar propiedades específicas de DLP para crear una consulta, sino también las propiedades de búsqueda estándar de eDiscovery de `Author` SharePoint `FileExtension`, como o. Puede usar operadores para crear consultas complejas. Para obtener la lista de las propiedades y los operadores disponibles, consulte la publicación [usar propiedades de búsqueda y operadores con entrada de blog de eDiscovery](https://go.microsoft.com/fwlink/?LinkId=510093) .</span><span class="sxs-lookup"><span data-stu-id="2e33a-p110">You can use not only DLP-specific properties to create a query, but also standard SharePoint eDiscovery search properties such as  `Author` or  `FileExtension`. You can use operators to build complex queries. For the list of available properties and operators, see the [Using Search Properties and Operators with eDiscovery](https://go.microsoft.com/fwlink/?LinkId=510093) blog post.</span></span> 
  
## <a name="examples-of-complex-queries"></a><span data-ttu-id="2e33a-150">Ejemplos</span><span class="sxs-lookup"><span data-stu-id="2e33a-150">Examples of complex queries</span></span>

<span data-ttu-id="2e33a-151">En los ejemplos siguientes se usan diferentes tipos, propiedades y operadores de distinción para ilustrar cómo puede ajustar las consultas para encontrar exactamente lo que está buscando.</span><span class="sxs-lookup"><span data-stu-id="2e33a-151">The following examples use different sensitive types, properties, and operators to illustrate how you can refine your queries to find exactly what you're looking for.</span></span>
  
|<span data-ttu-id="2e33a-152">**Consulta**</span><span class="sxs-lookup"><span data-stu-id="2e33a-152">**Query**</span></span>|<span data-ttu-id="2e33a-153">**Explicación**</span><span class="sxs-lookup"><span data-stu-id="2e33a-153">**Explanation**</span></span>|
|:-----|:-----|
| `SensitiveType:"International Banking Account Number (IBAN)"` <br/> |<span data-ttu-id="2e33a-p111">El nombre puede parecer extraño porque es tan largo, pero es el nombre correcto para ese tipo confidencial. Asegúrese de usar nombres exactos del [inventario de tipos de información confidencial](https://go.microsoft.com/fwlink/?LinkID=509999). También puede usar el nombre de un [tipo personalizado de información confidencial](create-a-custom-sensitive-information-type.md) que haya creado para su organización.</span><span class="sxs-lookup"><span data-stu-id="2e33a-p111">The name might seem strange because it's so long, but it's the correct name for that sensitive type. Make sure to use exact names from the [sensitive information types inventory](https://go.microsoft.com/fwlink/?LinkID=509999). You can also use the name of a [custom sensitive information type](create-a-custom-sensitive-information-type.md) that you created for your organization.  </span></span><br/> |
| `SensitiveType:"Credit Card Number|1..4294967295|1..100"` <br/> |<span data-ttu-id="2e33a-p112">Esto devuelve documentos con al menos una coincidencia con el tipo confidencial "número de tarjeta de crédito". Los valores de cada rango son los valores mínimos y máximos respectivos. Una forma más sencilla de escribir esta consulta es `SensitiveType:"Credit Card Number"`, pero ¿Dónde está la diversión?</span><span class="sxs-lookup"><span data-stu-id="2e33a-p112">This returns documents with at least one match to the sensitive type "Credit Card Number." The values for each range are the respective minimum and maximum values. A simpler way to write this query is  `SensitiveType:"Credit Card Number"`, but where's the fun in that?  </span></span><br/> |
| `SensitiveType:"Credit Card Number| 5..25" AND LastSensitiveContentScan:"8/11/2018..8/13/2018"` <br/> |<span data-ttu-id="2e33a-160">Esto devuelve los documentos con 5-25 números de tarjeta de crédito que fueron examinados del 11 de agosto de 2018 al 13 de agosto de 2018.</span><span class="sxs-lookup"><span data-stu-id="2e33a-160">This returns documents with 5-25 credit card numbers that were scanned from August 11, 2018 through August 13, 2018.</span></span>  <br/> |
| `SensitiveType:"Credit Card Number| 5..25" AND LastSensitiveContentScan:"8/11/2018..8/13/2018" NOT FileExtension:XLSX` <br/> |<span data-ttu-id="2e33a-p113">Esto devuelve los documentos con 5-25 números de tarjeta de crédito que fueron examinados del 11 de agosto de 2018 al 13 de agosto de 2018. Los archivos con una extensión XLSX no se incluyen en los resultados de la consulta.  `FileExtension` es una de las muchas propiedades que se pueden incluir en una consulta. Para obtener más información, vea [using Search Properties and Operators with eDiscovery](https://go.microsoft.com/fwlink/?LinkId=510093).</span><span class="sxs-lookup"><span data-stu-id="2e33a-p113">This returns documents with 5-25 credit card numbers that were scanned from August 11, 2018 through August 13, 2018. Files with an XLSX extension aren't included in the query results.  `FileExtension` is one of many properties that you can include in a query. For more information, see [Using Search Properties and Operators with eDiscovery](https://go.microsoft.com/fwlink/?LinkId=510093).  </span></span><br/> |
| `SensitiveType:"Credit Card Number" OR SensitiveType:"U.S. Social Security Number (SSN)"` <br/> |<span data-ttu-id="2e33a-165">Esto devuelve los documentos que contienen un número de tarjeta de crédito o un número de seguro social.</span><span class="sxs-lookup"><span data-stu-id="2e33a-165">This returns documents that contain either a credit card number or a social security number.</span></span>  <br/> |
   
## <a name="examples-of-queries-to-avoid"></a><span data-ttu-id="2e33a-166">Ejemplos</span><span class="sxs-lookup"><span data-stu-id="2e33a-166">Examples of queries to avoid</span></span>

<span data-ttu-id="2e33a-p114">No todas las consultas se crean de la misma. En la siguiente tabla, se proporcionan ejemplos de consultas que no funcionan con DLP en SharePoint y se describe por qué.</span><span class="sxs-lookup"><span data-stu-id="2e33a-p114">Not all queries are created equal. The following table gives examples of queries that don't work with DLP in SharePoint and describes why.</span></span>
  
|<span data-ttu-id="2e33a-169">**Consulta no compatible**</span><span class="sxs-lookup"><span data-stu-id="2e33a-169">**Unsupported query**</span></span>|<span data-ttu-id="2e33a-170">**Reason**</span><span class="sxs-lookup"><span data-stu-id="2e33a-170">**Reason**</span></span>|
|:-----|:-----|
| `SensitiveType:"Credit Card Number|.."` <br/> |<span data-ttu-id="2e33a-171">Debe agregar, al menos, un número.</span><span class="sxs-lookup"><span data-stu-id="2e33a-171">You must add at least one number.</span></span>  <br/> |
| `SensitiveType:"NotARule"` <br/> |<span data-ttu-id="2e33a-p115">"NotARule" no es un nombre de tipo confidencial válido. Solo los nombres del [inventario de tipos de información confidencial](https://go.microsoft.com/fwlink/?LinkID=509999) funcionan en las consultas de DLP.</span><span class="sxs-lookup"><span data-stu-id="2e33a-p115">"NotARule" isn't a valid sensitive type name. Only names in the [sensitive information types inventory](https://go.microsoft.com/fwlink/?LinkID=509999) work in DLP queries.  </span></span><br/> |
| `SensitiveType:"Credit Card Number|0"` <br/> |<span data-ttu-id="2e33a-174">Cero no es válido como valor mínimo o como valor máximo en un intervalo.</span><span class="sxs-lookup"><span data-stu-id="2e33a-174">Zero isn't valid as either the minimum value or the maximum value in a range.</span></span>  <br/> |
| `SensitiveType:"Credit Card Number"` <br/> |<span data-ttu-id="2e33a-p116">Es posible que sea difícil ver, pero hay un espacio en blanco adicional entre "Credit" y "Card" que hace que la consulta no sea válida. Use nombres de tipo confidenciales exactos del [inventario de tipos de información confidencial](https://go.microsoft.com/fwlink/?LinkID=509999).</span><span class="sxs-lookup"><span data-stu-id="2e33a-p116">It's might be difficult to see, but there's extra white space between "Credit" and "Card" that makes the query invalid. Use exact sensitive type names from the [sensitive information types inventory](https://go.microsoft.com/fwlink/?LinkID=509999).  </span></span><br/> |
| `SensitiveType:"Credit Card Number|1. .3"` <br/> |<span data-ttu-id="2e33a-177">La parte de dos puntos no debe estar separada por un espacio.</span><span class="sxs-lookup"><span data-stu-id="2e33a-177">The two-period portion shouldn't be separated by a space.</span></span>  <br/> |
| `SensitiveType:"Credit Card Number| |1..|80.."` <br/> |<span data-ttu-id="2e33a-178">Hay demasiados delimitadores de canalización (</span><span class="sxs-lookup"><span data-stu-id="2e33a-178">There are too many pipe delimiters (</span></span>|<span data-ttu-id="2e33a-p117">). Siga este formato en su lugar:`SensitiveType: "Credit Card Number|1..|80.."`</span><span class="sxs-lookup"><span data-stu-id="2e33a-p117">). Follow this format instead: `SensitiveType: "Credit Card Number|1..|80.."`</span></span> <br/> |
| `SensitiveType:"Credit Card Number|1..|80..101"` <br/> |<span data-ttu-id="2e33a-p118">Como los valores de confianza representan un porcentaje, no pueden exceder de 100. Elija un número comprendido entre 1 y 100 en su lugar.</span><span class="sxs-lookup"><span data-stu-id="2e33a-p118">Because confidence values represent a percentage, they can't exceed 100. Choose a number from 1 through 100 instead.</span></span>  <br/> |
   
## <a name="for-more-information"></a><span data-ttu-id="2e33a-183">Más información</span><span class="sxs-lookup"><span data-stu-id="2e33a-183">For more information</span></span>

[<span data-ttu-id="2e33a-184">Información que buscan los tipos de información confidencial</span><span class="sxs-lookup"><span data-stu-id="2e33a-184">What the sensitive information types look for</span></span>](what-the-sensitive-information-types-look-for.md)
  
[<span data-ttu-id="2e33a-185">Ejecutar una búsqueda de contenido en el centro de &amp; seguridad y cumplimiento de Office 365</span><span class="sxs-lookup"><span data-stu-id="2e33a-185">Run a Content Search in the Office 365 Security &amp; Compliance Center</span></span>](run-a-content-search-in-the-security-and-compliance-center.md)
  
<span data-ttu-id="2e33a-186">[Consultas de palabras clave y condiciones de búsqueda para la búsqueda de contenido](keyword-queries-and-search-conditions.md).</span><span class="sxs-lookup"><span data-stu-id="2e33a-186">[Keyword queries and search conditions for Content Search](keyword-queries-and-search-conditions.md)</span></span>
  

